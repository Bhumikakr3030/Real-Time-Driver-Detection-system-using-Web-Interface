<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Driver Drowsiness Detection System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a2a3a, #0d1b2a);
            color: #e0e1dd;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 30px;
            border-bottom: 1px solid #415a77;
        }

        h1 {
            font-size: 2.5rem;
            color: #e0e1dd;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .subtitle {
            font-size: 1.2rem;
            color: #778da9;
        }

        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
        }

        .panel {
            background: rgba(26, 42, 58, 0.8);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
            border: 1px solid #415a77;
        }

        .panel-title {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: #e0e1dd;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .panel-title i {
            color: #778da9;
        }

        .video-container {
            position: relative;
            width: 100%;
            height: 300px;
            background: #0d1b2a;
            border-radius: 10px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
        }

        .video-feed {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 10px;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }

        .status {
            padding: 12px 25px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 1.2rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .status-awake {
            background: rgba(46, 125, 50, 0.3);
            color: #81c784;
            border: 2px solid #4caf50;
        }

        .status-drowsy {
            background: rgba(198, 40, 40, 0.3);
            color: #ff8a80;
            border: 2px solid #f44336;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .sensor-data {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .sensor-item {
            background: rgba(13, 27, 42, 0.7);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .sensor-value {
            font-size: 1.8rem;
            font-weight: bold;
            margin: 10px 0;
        }

        .sensor-label {
            font-size: 0.9rem;
            color: #778da9;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .btn-start {
            background: #4caf50;
            color: white;
        }

        .btn-stop {
            background: #f44336;
            color: white;
        }

        .btn-reset {
            background: #ff9800;
            color: white;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        button:disabled {
            background: #778da9;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .logs-container {
            max-height: 300px;
            overflow-y: auto;
            background: rgba(13, 27, 42, 0.7);
            border-radius: 10px;
            padding: 15px;
        }

        .log-item {
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .log-normal {
            background: rgba(26, 42, 58, 0.8);
            border-left: 4px solid #4caf50;
        }

        .log-alert {
            background: rgba(198, 40, 40, 0.2);
            border-left: 4px solid #f44336;
        }

        .log-time {
            font-weight: bold;
        }

        .log-message {
            flex: 1;
            margin-left: 15px;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            background: rgba(13, 27, 42, 0.7);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            margin: 10px 0;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #778da9;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #778da9;
            font-size: 0.9rem;
            border-top: 1px solid #415a77;
        }

        /* Canvas for simulated video */
        #videoCanvas {
            width: 100%;
            height: 100%;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Driver Drowsiness Detection System</h1>
            <p class="subtitle">Real-time monitoring for driver alertness and safety</p>
        </header>

        <div class="dashboard">
            <div class="panel">
                <h2 class="panel-title">
                    <i>ðŸ“¹</i> Live Camera Feed
                </h2>
                <div class="video-container">
                    <canvas id="videoCanvas"></canvas>
                </div>
                
                <div class="status-indicator">
                    <div id="statusIndicator" class="status status-awake">AWAKE</div>
                </div>

                <div class="sensor-data">
                    <div class="sensor-item">
                        <div class="sensor-label">Eye Closure</div>
                        <div id="eyeValue" class="sensor-value">12%</div>
                    </div>
                    <div class="sensor-item">
                        <div class="sensor-label">Head Tilt</div>
                        <div id="headValue" class="sensor-value">3Â°</div>
                    </div>
                    <div class="sensor-item">
                        <div class="sensor-label">Blink Rate</div>
                        <div id="blinkValue" class="sensor-value">0.2/s</div>
                    </div>
                    <div class="sensor-item">
                        <div class="sensor-label">Yawn Detection</div>
                        <div id="yawnValue" class="sensor-value">No</div>
                    </div>
                </div>

                <div class="controls">
                    <button id="startBtn" class="btn-start">Start Detection</button>
                    <button id="stopBtn" class="btn-stop" disabled>Stop Detection</button>
                    <button id="resetBtn" class="btn-reset">Reset Logs</button>
                </div>
            </div>

            <div class="panel">
                <h2 class="panel-title">
                    <i>ðŸ“Š</i> System Status & Logs
                </h2>
                
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-label">Detection Time</div>
                        <div id="detectionTime" class="stat-value">00:00</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Drowsy Events</div>
                        <div id="drowsyEvents" class="stat-value">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Alert Level</div>
                        <div id="alertLevel" class="stat-value">1</div>
                    </div>
                </div>

                <h3 style="margin: 20px 0 10px;">Event Log</h3>
                <div class="logs-container" id="logsContainer">
                    <div class="log-item log-normal">
                        <div class="log-time">10:30:15</div>
                        <div class="log-message">System initialized successfully</div>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>Driver Drowsiness Detection System &copy; 2023 | For demonstration purposes only</p>
        </footer>
    </div>

    <script>
        // DOM Elements
        const videoCanvas = document.getElementById('videoCanvas');
        const statusIndicator = document.getElementById('statusIndicator');
        const eyeValue = document.getElementById('eyeValue');
        const headValue = document.getElementById('headValue');
        const blinkValue = document.getElementById('blinkValue');
        const yawnValue = document.getElementById('yawnValue');
        const startBtn = document.getElementById('startBtn');
        const stopBtn = document.getElementById('stopBtn');
        const resetBtn = document.getElementById('resetBtn');
        const detectionTime = document.getElementById('detectionTime');
        const drowsyEvents = document.getElementById('drowsyEvents');
        const alertLevel = document.getElementById('alertLevel');
        const logsContainer = document.getElementById('logsContainer');

        // Application State
        let isDetecting = false;
        let detectionInterval;
        let startTime;
        let elapsedTime = 0;
        let eventsCount = 0;
        let currentAlertLevel = 1;
        let ctx = videoCanvas.getContext('2d');

        // Initialize canvas
        function initCanvas() {
            videoCanvas.width = videoCanvas.offsetWidth;
            videoCanvas.height = videoCanvas.offsetHeight;
            drawVideoFeed();
        }

        // Draw simulated video feed
        function drawVideoFeed() {
            if (!isDetecting) return;
            
            ctx.fillStyle = '#0d1b2a';
            ctx.fillRect(0, 0, videoCanvas.width, videoCanvas.height);
            
            // Draw face outline
            const centerX = videoCanvas.width / 2;
            const centerY = videoCanvas.height / 2;
            const faceRadius = Math.min(videoCanvas.width, videoCanvas.height) * 0.3;
            
            ctx.strokeStyle = '#415a77';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.arc(centerX, centerY, faceRadius, 0, Math.PI * 2);
            ctx.stroke();
            
            // Draw eyes
            const eyeSpacing = faceRadius * 0.5;
            const eyeY = centerY - faceRadius * 0.2;
            const eyeRadius = faceRadius * 0.15;
            
            ctx.fillStyle = '#778da9';
            ctx.beginPath();
            ctx.arc(centerX - eyeSpacing, eyeY, eyeRadius, 0, Math.PI * 2);
            ctx.arc(centerX + eyeSpacing, eyeY, eyeRadius, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw mouth
            const mouthWidth = faceRadius * 0.6;
            const mouthHeight = faceRadius * 0.2;
            const mouthY = centerY + faceRadius * 0.3;
            
            ctx.beginPath();
            ctx.ellipse(centerX, mouthY, mouthWidth, mouthHeight, 0, 0, Math.PI);
            ctx.stroke();
            
            requestAnimationFrame(drawVideoFeed);
        }

        // Update sensor values randomly
        function updateSensorValues() {
            if (!isDetecting) return;
            
            // Simulate sensor data changes
            const eyeClosure = Math.floor(Math.random() * 30);
            const headTilt = Math.floor(Math.random() * 15);
            const blinkRate = (Math.random() * 0.5).toFixed(1);
            const isYawning = Math.random() > 0.8 ? 'Yes' : 'No';
            
            eyeValue.textContent = `${eyeClosure}%`;
            headValue.textContent = `${headTilt}Â°`;
            blinkValue.textContent = `${blinkRate}/s`;
            yawnValue.textContent = isYawning;
            
            // Randomly trigger drowsiness (5% chance each update)
            if (Math.random() < 0.05) {
                triggerDrowsiness();
            }
        }

        // Trigger drowsiness alert
        function triggerDrowsiness() {
            statusIndicator.textContent = 'DROWSY';
            statusIndicator.className = 'status status-drowsy';
            
            eventsCount++;
            drowsyEvents.textContent = eventsCount;
            
            // Increase alert level
            currentAlertLevel = Math.min(currentAlertLevel + 1, 5);
            alertLevel.textContent = currentAlertLevel;
            
            // Add log entry
            const now = new Date();
            const timeString = now.toTimeString().split(' ')[0];
            addLogEntry(timeString, 'Drowsiness detected! Alert level increased.', true);
            
            // Play alert sound (in a real app)
            // new Audio('alert.mp3').play().catch(() => {});
        }

        // Reset to normal state
        function resetToNormal() {
            statusIndicator.textContent = 'AWAKE';
            statusIndicator.className = 'status status-awake';
            
            currentAlertLevel = 1;
            alertLevel.textContent = currentAlertLevel;
            
            const now = new Date();
            const timeString = now.toTimeString().split(' ')[0];
            addLogEntry(timeString, 'Driver returned to normal state.', false);
        }

        // Add log entry
        function addLogEntry(time, message, isAlert) {
            const logItem = document.createElement('div');
            logItem.className = `log-item ${isAlert ? 'log-alert' : 'log-normal'}`;
            logItem.innerHTML = `
                <div class="log-time">${time}</div>
                <div class="log-message">${message}</div>
            `;
            
            logsContainer.prepend(logItem);
            
            // Limit logs to 20 entries
            if (logsContainer.children.length > 20) {
                logsContainer.removeChild(logsContainer.lastChild);
            }
        }

        // Update detection timer
        function updateTimer() {
            if (!isDetecting) return;
            
            elapsedTime = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(elapsedTime / 60).toString().padStart(2, '0');
            const seconds = (elapsedTime % 60).toString().padStart(2, '0');
            detectionTime.textContent = `${minutes}:${seconds}`;
        }

        // Start detection
        function startDetection() {
            isDetecting = true;
            startBtn.disabled = true;
            stopBtn.disabled = false;
            startTime = Date.now();
            
            initCanvas();
            
            detectionInterval = setInterval(() => {
                updateSensorValues();
                updateTimer();
                
                // Randomly reset to normal state (10% chance)
                if (Math.random() < 0.1 && statusIndicator.textContent === 'DROWSY') {
                    resetToNormal();
                }
            }, 1000);
            
            const now = new Date();
            const timeString = now.toTimeString().split(' ')[0];
            addLogEntry(timeString, 'Drowsiness detection started.', false);
        }

        // Stop detection
        function stopDetection() {
            isDetecting = false;
            startBtn.disabled = false;
            stopBtn.disabled = true;
            
            clearInterval(detectionInterval);
            
            const now = new Date();
            const timeString = now.toTimeString().split(' ')[0];
            addLogEntry(timeString, 'Drowsiness detection stopped.', false);
        }

        // Reset logs and counters
        function resetLogs() {
            eventsCount = 0;
            elapsedTime = 0;
            currentAlertLevel = 1;
            
            drowsyEvents.textContent = '0';
            detectionTime.textContent = '00:00';
            alertLevel.textContent = '1';
            
            logsContainer.innerHTML = `
                <div class="log-item log-normal">
                    <div class="log-time">${new Date().toTimeString().split(' ')[0]}</div>
                    <div class="log-message">Logs reset</div>
                </div>
            `;
            
            resetToNormal();
        }

        // Event Listeners
        startBtn.addEventListener('click', startDetection);
        stopBtn.addEventListener('click', stopDetection);
        resetBtn.addEventListener('click', resetLogs);

        // Initialize
        window.addEventListener('resize', initCanvas);
        initCanvas();
    </script>
</body>
</html>

